# ModBusRTU æ¨¡å—é€»è¾‘é—®é¢˜æ£€æŸ¥æŠ¥å‘?
## ğŸ” æ£€æŸ¥æ—¥æœ?2024-01-01

## â?å‘ç°çš„ä¸¥é‡é€»è¾‘é—®é¢˜

### 1. âš ï¸ **CRCå­—èŠ‚åºé”™è¯?*ï¼ˆä¸¥é‡ï¼‰

**ä½ç½®**ï¼?- `ModBusRTU_ParseResponseFrame` å‡½æ•°ç¬?19è¡?- `ModBusRTU_SlaveProcess` å‡½æ•°ç¬?73è¡?
**é—®é¢˜æè¿°**ï¼?- æ„å»ºå¸§æ—¶ï¼šCRCä½ä½åœ¨å‰ï¼Œé«˜ä½åœ¨åï¼ˆæ­£ç¡®ï¼?  ```c
  frame[pos++] = (uint8_t)(crc & 0xFF);        /* CRCä½ä½åœ¨å‰ */
  frame[pos++] = (uint8_t)((crc >> 8) & 0xFF); /* CRCé«˜ä½åœ¨å */
  ```
- è§£æå¸§æ—¶ï¼šCRCå­—èŠ‚åºè¯»å–é”™è¯?  ```c
  crc_received = ((uint16_t)frame[frame_length - 1] << 8) | frame[frame_length - 2];
  ```
  è¿™è¡Œä»£ç å°†é«˜ä½æ”¾åœ¨å‰é¢ï¼Œä½ä½æ”¾åœ¨åé¢ï¼Œä¸æ„å»ºæ—¶çš„é¡ºåºç›¸åï¼?
**æ­£ç¡®å†™æ³•**ï¼?```c
crc_received = ((uint16_t)frame[frame_length - 2]) | ((uint16_t)frame[frame_length - 1] << 8);
```
æˆ–è€…æ›´æ¸…æ™°ï¼?```c
crc_received = (uint16_t)frame[frame_length - 2] | ((uint16_t)frame[frame_length - 1] << 8);
```

**å½±å“**ï¼?- ä¼šå¯¼è‡´æ‰€æœ‰CRCæ ¡éªŒå¤±è´¥
- é€šä¿¡å®Œå…¨æ— æ³•æ­£å¸¸å·¥ä½œ

**ä¿®å¤ä¼˜å…ˆçº?*ï¼šğŸ”?**ç«‹å³ä¿®å¤**

---

## âœ?å…¶ä»–æ£€æŸ¥é¡¹

### 2. æ•°æ®å­—èŠ‚åºå¤„ç?- âœ?åœ°å€å’Œå¯„å­˜å™¨æ•°é‡ï¼šé«˜å­—èŠ‚åœ¨å‰ï¼Œä½å­—èŠ‚åœ¨åï¼ˆç¬¦åˆModBusRTUæ ‡å‡†ï¼?- âœ?å¯„å­˜å™¨æ•°æ®ï¼šé«˜å­—èŠ‚åœ¨å‰ï¼Œä½å­—èŠ‚åœ¨åï¼ˆç¬¦åˆModBusRTUæ ‡å‡†ï¼?
### 3. å¸§é•¿åº¦è®¡ç®?- âœ?è¯·æ±‚å¸§é•¿åº¦è®¡ç®—æ­£ç¡?- âœ?å“åº”å¸§é•¿åº¦è®¡ç®—æ­£ç¡?- âœ?ä»æœºæ¨¡å¼åŠ¨æ€å¸§é•¿åº¦è®¡ç®—æ­£ç¡®

### 4. å‚æ•°æ ¡éªŒ
- âœ?æ‰€æœ‰å‡½æ•°éƒ½æœ‰å®Œæ•´çš„å‚æ•°æ ¡éªŒ
- âœ?è¾¹ç•Œæ¡ä»¶æ£€æŸ¥æ­£ç¡?
### 5. é”™è¯¯å¤„ç†
- âœ?å¼‚å¸¸å“åº”æ£€æµ‹é€»è¾‘æ­£ç¡®
- âœ?é”™è¯¯ç è¿”å›æ­£ç¡?
---

## ğŸ“ æ€»ç»“

**å‘ç°1ä¸ªä¸¥é‡é€»è¾‘é—®é¢˜**ï¼?- CRCå­—èŠ‚åºè¯»å–é”™è¯¯ï¼ˆå¿…é¡»ç«‹å³ä¿®å¤ï¼?
**å…¶ä»–é€»è¾‘**ï¼šâœ… æ­£ç¡®

---

## ğŸ”§ ä¿®å¤å»ºè®®

1. **ç«‹å³ä¿®å¤CRCå­—èŠ‚åºé—®é¢?*
2. **æ·»åŠ å•å…ƒæµ‹è¯•éªŒè¯CRCæ ¡éªŒ**
3. **åœ¨ä¼˜åŒ–å®æ–½å‰ç¡®ä¿é€»è¾‘æ­£ç¡®**
