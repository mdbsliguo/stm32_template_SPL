# 系统外设模块

本分类用于存放系统外设驱动模块。

## 📋 模块清单

| 模块 | 说明 | 状态 |
|------|------|------|
| [EXTI](exti/) | 外部中断管理 | ✅ 已实现 |
| NVIC | 中断优先级管理 | ✅ 已实现 |
| [RTC](rtc.h) | 实时时钟（STM32内部RTC） | ✅ 已实现 |
| [WWDG](wwdg.h) | 窗口看门狗 | ✅ 已实现 |
| [BKP](bkp.h) | 备份寄存器 | ✅ 已实现 |
| [PWR](pwr.h) | 低功耗模式 | ✅ 已实现 |
| [FLASH](flash.h) | Flash编程/擦除 | ✅ 已实现 |
| [CRC](crc.h) | CRC32计算 | ✅ 已实现 |
| [DBGMCU](dbgmcu.h) | 调试模式配置 | ✅ 已实现 |
| [SDIO](sdio.h) | SD卡接口 | ✅ 已实现 |
| [FSMC](fsmc.h) | 外部存储器接口 | ✅ 已实现 |
| [CEC](cec.h) | 消费电子控制协议 | ✅ 已实现 |

## 🎯 职责

1. **EXTI模块**：外部中断配置，支持上升沿/下降沿/双边沿触发，中断/事件模式，中断回调
2. **NVIC模块**：中断优先级配置，中断使能/禁用
3. **RTC模块**：STM32内部RTC实时时钟，时间读取/设置，闹钟功能，支持LSE/LSI/HSE_Div128时钟源
4. **WWDG模块**：窗口看门狗，提供窗口限制功能，必须在窗口内喂狗
5. **BKP模块**：备份寄存器，数据在系统复位或掉电后仍能保持（需要VBAT供电）
6. **PWR模块**：低功耗模式，支持STOP模式和STANDBY模式，PVD电源电压检测
7. **FLASH模块**：Flash编程/擦除，选项字节管理，Flash保护，延迟周期配置
8. **CRC模块**：CRC32计算，支持单数据和数据块计算，独立数据寄存器（IDR）
9. **DBGMCU模块**：调试模式配置，低功耗调试，外设调试使能，设备ID/版本读取
10. **SDIO模块**：SD卡接口，MMC卡支持，4位/1位模式，SDIO中断/DMA支持（需要外部SD卡槽）
11. **FSMC模块**：外部存储器接口，支持NOR/SRAM/NAND/PCCARD，时序配置，中断支持（需要外部存储器）
12. **CEC模块**：消费电子控制协议，HDMI CEC支持，中断支持（仅CL型号）

## ⚠️ 重要说明

1. **EXTI模块**：
   - 支持EXTI线0-19（Line 0-15需要配置GPIO，Line 16-19为特殊功能）
   - 支持上升沿/下降沿/双边沿触发
   - 支持中断模式和事件模式
   - 支持中断回调函数

2. **所有模块**：
   - 使用统一的错误处理机制
   - 配置在`BSP/board.h`中定义
   - 模块开关在`System/config.h`中控制

