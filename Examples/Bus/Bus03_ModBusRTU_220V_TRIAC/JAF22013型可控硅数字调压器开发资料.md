# JAF22013型可控硅数字调压器 开发资料整理

## 一、产品核心规格

- **型号**：JAF22013型可控硅数字调压器
- **主控**：ARM内核单片机
- **显示**：LED数码管
- **输入电压**：AC 220V/110V，50/60Hz自适应
- **最大驱动电流**：5A（建议长时间运行≤4A）
- **功率限制**：220V时≤900W，110V时≤450W
- **工作温度**：-25℃~70℃
- **安装方式**：标准35mm导轨安装（尺寸：9×5×4cm）

------

## 二、接线与负载要求

### 支持的负载类型

- **纯阻性负载**：电阻、热水棒、钨丝灯、小太阳取暖器等
- **感性负载**：交流风机风扇、单相电机、水泵等
- **不支持**：LED灯、电源适配器等电子设备
- **特殊说明**：部分带启动电容的电机/风扇可能不兼容，需实测验证

### 接线注意事项

- 必须接入负载才能正常工作
- 必须断电操作，严禁带电接线
- 即使输出0V也禁止触摸输出端口
- 内置保险丝和RC浪涌吸收电路

------

## 三、数码面板参数配置

### 按键定义

- **MODE**：进入/切换参数项
- **↑↓**：调整数值
- **OK**：确认保存（每项参数修改后必须按OK确认）

### 参数列表

表格

复制

| 数显代号 | 参数名称     | 设置范围 | 说明                                         |
| :------- | :----------- | :------- | :------------------------------------------- |
| **Axx**  | MODBUS地址   | 1~254    | 设备通信地址                                 |
| **bxx**  | 串口波特率   | 1~3      | 1=4800, 2=9600, 3=19200bps（**需复位生效**） |
| **Exx**  | 输出下限     | 20%~80%  | 最小输出档位限制                             |
| **Cxx**  | 上电默认输出 | 0~100    | 实际输出值 = E + 设置值（如E=20, C10=30%）   |
| **dxx**  | 输出校准     | -        | 默认d10，调压异常时可调整，正常则保持默认    |

### 手动控制

待机状态直接按↑↓键调整输出，范围：0%、E~80%、100%，步进1%

------

## 四、RS485通信协议

### 串口参数

- **协议**：MODBUS-RTU（从机模式）
- **波特率**：9600bps（出厂默认）
- **数据格式**：8位数据位，1位停止位，无校验

### MODBUS寄存器表

表格

复制

| 寄存器地址 | 功能说明         | 取值范围                                | 功能码     |
| :--------- | :--------------- | :-------------------------------------- | :--------- |
| **0x0000** | 最小输出档位     | 0x0000, 0x0014~0x0050, 0x0064           | 03/06      |
| **0x0001** | 波特率设置       | 0x0001~0x0003（1=4800,2=9600,3=19200）  | 03/06      |
| **0x0002** | MODBUS地址       | 0x0001~0x00FE（**支持0xFFFF广播读取**） | 03/06      |
| **0x0003** | 输出值（百分比） | 0x0000, 0x0014~0x0050, 0x0064           | 03/06      |
| **0x0004** | 上电默认输出     | 0x0000, 0x000A~0x0032, 0x0064           | 03/06      |
| **0x0005** | 输出校准         | 0x0000, 0x0005, 0x000A, 0x000F, 0x0014  | 03/06      |
| **0x0020** | 复位重启         | 写入0x00AA触发复位                      | 06（只写） |

------

## 五、通信指令示例

### 1. 控制输出（功能码0x06，寄存器0x0003）

**场景**：设置1号设备输出50%

- **主机发送**：`01 06 00 03 00 32 F8 1F`
- **设备应答**：`01 06 00 03 00 32 F8 1F`（原帧返回）

### 2. 修改设备地址（功能码0x06，寄存器0x0002）

**场景**：将1号地址改为2号

- **主机发送**：`01 06 00 02 00 02 A9 CB`
- **设备应答**：`02 06 00 02 00 02 A9 F8`（**应答帧地址更新为新地址**）

### 3. 广播指令

- 地址字段可使用`0xFF`进行广播
- 可用于不确定设备地址时的批量操作

------

## 六、输出特性

- 采用双向可控硅调压，输出百分比与电压呈**非线性关系**
- 220V输入时输出曲线见手册图示（非纯线性）
- 调节范围：0%、下限值E~80%、100%
- 最小步进：1%

------

## 七、开发建议

1. **上电初始化**：设备自动恢复断电前输出值，建议先读取当前状态
2. **参数写入**：每次修改参数后必须发送确认指令，并建议随后读取验证
3. **关键操作**：修改波特率或地址后需发送复位指令（0x0020=0x00AA）生效
4. **安全机制**：在软件层面增加输出下限验证，防止误操作低于E值
5. **负载检测**：控制前建议增加负载连接状态检测逻辑
6. **校准保持**：如无必要，不要修改dxx校准参数

------

## 八、配套资源

- **上位机软件**：官网提供MODBUS调试工具，支持可视化参数配置
- **默认参数**：地址=1，波特率=9600bps，校准值=d10