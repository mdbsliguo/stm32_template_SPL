---
description: 优先级体系规则 - 定义规则优先级和冲突解决机制
alwaysApply: false
priority: high
---

<!-- 
注意：本文件的实际内容存储在 AI/rules/0_core/priority.mdc
此文件为 Cursor IDE 的规则入口，内容与 AI/rules/0_core/priority.mdc 同步
如需修改规则，请编辑 AI/rules/0_core/priority.mdc，然后同步到此文件
-->

# 优先级体系规则

**本文件为【标题级核心规则】。优先级低于KEYWORDS.md，高于所有1_topics与reference。**

---

## 优先级层级

### 1. 层级定义（由高到低）

1. **KEYWORDS.md（KEYWORDS.mdc）**
   - 最高优先级
   - 不可被覆盖
   - 所有规则的基础

2. **核心规则（0_core）**
   - `writing.mdc` - 写作核心规则
   - `structure.mdc` - 文档结构规则
   - `priority.mdc` - 优先级体系规则（本文件）

3. **功能性规则（1_topics）**
   - `stm32.mdc` - STM32项目特定规则
   - `tech.mdc` - 技术写作规则
   - `style.mdc` - 文案风格规则
   - `error.mdc` - 错误处理规则

4. **参考内容（2_reference）**
   - `markdown.mdc` - Markdown格式参考
   - `examples.mdc` - 示例文档参考

---

## 冲突解决

### 2. 冲突解决原则

- **若规则冲突，以优先级最高的为准**
  - KEYWORDS > 核心规则 > 功能性规则 > 参考内容

- **若均无冲突，高级规则补充低级规则**
  - 高级规则提供基础框架
  - 低级规则提供具体细节
  - 两者结合使用

- **若无规则，则遵循KEYWORDS.md的通用原则**
  - 最小惊讶原则
  - 结构化输出
  - 防御性编程

---

## 加载顺序

### 3. 规则加载顺序

1. **首先加载**：`KEYWORDS.mdc`（alwaysApply: true）
2. **然后加载**：核心规则（0_core/*）
3. **按需加载**：功能性规则（1_topics/*）
   - 根据文件类型自动加载（通过globs匹配）
   - 或由AI根据任务相关性选择加载
4. **参考使用**：参考内容（2_reference/*）
   - 无约束力，仅作为参考

---

## 规则应用场景

### 4. 规则应用方式

- **Always规则**：`alwaysApply: true`
  - 始终包含在AI上下文中
  - 适用于最高优先级规则

- **Auto Attached规则**：通过`globs`匹配
  - 当匹配的文件被引用时自动附加
  - 适用于特定文件类型的规则

- **Agent Requested规则**：通过`description`描述
  - AI根据任务相关性选择包含
  - 适用于功能性规则

- **Manual规则**：通过`@ruleName`显式调用
  - 仅在需要时包含
  - 适用于参考内容

---

## 规则文件命名规范

### 5. 文件命名约定

- **KEYWORDS.mdc**：最高优先级规则
- **0_core/*.mdc**：核心规则
- **1_topics/*.mdc**：功能性规则
- **2_reference/*.mdc**：参考内容

数字前缀用于：
- 明确优先级顺序
- 便于文件排序
- 便于快速识别规则类型

